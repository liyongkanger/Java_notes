### ac848有向拓扑图排序

### 题目描述
给定一个n个点m条边的有向图，点的编号是1到n，图中可能存在重边和自环。

请输出任意一个该有向图的拓扑序列，如果拓扑序列不存在，则输出-1。

若一个由图中所有点构成的序列A满足：对于图中的每条边(x, y)，x在A中都出现在y之前，则称A是该图的一个拓扑序列。
#### 样例

```
3 3
1 2
2 3
1 3
```

#### c++
```
#include<iostream>
#include<cstring>
#include<algorithm>

using namespace std;

const int N = 100010;
int n, m;
int h[N], e[N], ne[N], idx;
int d[N];
int q[N];

void add(int a, int b){
    e[idx] = b;
    ne[idx] = h[a];
    h[a] = idx ++;
}

bool topsort(){
    int hh = 0, tt = -1;
    //入度为0的点加入队列
    for(int i = 1; i <= n; i ++){
        if(!d[i]) q[ ++ tt] = i;
    }
    //队列不为空
    while(hh <= tt){
        //取出队头
        int t = q[hh ++];
        
        for(int i = h[t]; i != -1; i = ne[i]){
            int j = e[i];
           //删除 t 到 j的边 
            if(-- d[j] == 0){
                q[++ tt] = j;
            }
        }
    }
    return tt == n - 1;
}



int main(){
    scanf("%d%d", &n, &m);
    
    memset(h, -1, sizeof h);
    
    for(int i = 0; i < m; i ++){
        int a, b;
        scanf("%d%d", &a, &b);
        add(a, b);
        //入度
        d[b] ++;
    }
    if(!topsort()) puts("-1");
    else{
        for(int i = 0; i < n; i ++) printf("%d ", q[i]);
        puts("");
    }
    return 0;
}
```


#### java
```c++
import java.io.*;
import java.util.*;

class Main{
    
    static int N = 100010;
    static int[] h = new int[N];
    static int[] e = new int[N];
    static int[] ne = new int[N];
    static int idx, n, m;
    static int[] q = new int[N];
    
    static int[] r = new int[N];
    
    static void add(int a ,int b){
        e[idx] = b;
        ne[idx] = h[a];
        h[a] = idx ++;
    }
    
    static boolean topSort(){
        int hh = 0, tt = -1;
        for(int i = 1; i <= n;i ++){
            if(r[i] == 0)  q[ ++ tt] = i;
        }
        
    while(hh <= tt){
        int t = q[hh ++];
        
        for(int i  = h[t]; i != -1; i = ne[i] ){
            int j = e[i];
           if(-- r[j] == 0){
               q[++ tt] = j;
           }
        }
    }
    return tt == n - 1;
    
    }
    
    
    
    
    public static void main(String[] args) throws IOException{
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        String[] cur = in.readLine().split(" ");
        Arrays.fill(h, -1);    
        n = Integer.parseInt(cur[0]);
        m = Integer.parseInt(cur[1]);
        
        while(m -- > 0){
            String[] arr = in.readLine().split(" ");
            int a = Integer.parseInt(arr[0]);
            int b = Integer.parseInt(arr[1]);
            add(a, b);
            r[b] ++;
        }
        
        if(!topSort()) System.out.println("-1");
        
        else{
            
            for(int i = 0; i < n; i ++){
                System.out.print(q[i] + " ");
            }
        }
        
        
    }
}
```